# 診所AI查詢系統用戶手冊

歡迎使用診所AI查詢系統！本系統專為醫護人員設計，能夠以自然語言查詢診所的病患資料，讓您更輕鬆地獲取所需的醫療資訊。

## 🎯 系統概述

### 主要功能
- 🤖 **自然語言查詢**: 用中文提問，系統自動轉換為資料庫查詢
- 📊 **智能統計分析**: 自動生成圖表和統計報告
- 🔍 **多維度搜索**: 支援病患、診斷、處方、檢驗等各類查詢
- 📈 **趨勢分析**: 提供時間序列分析和健康趨勢追蹤
- 🔒 **隱私保護**: 本地部署，確保病患資料安全

### 系統架構
本系統基於展望診療系統的DBF資料格式，支援以下資料表：
- **CO01M**: 病患基本資料
- **CO02M**: 處方記錄
- **CO03M**: 就診摘要
- **CO18H**: 檢驗結果

## 🚀 快速開始

### 登入系統

1. 開啟瀏覽器，前往系統網址 (通常是 `http://your-server:8501`)
2. 輸入您的帳號和密碼
3. 點擊「登入」按鈕

### 首次使用導覽

登入後，您會看到以下主要區域：

1. **導覽列** (左側): 包含查詢、統計、設定等功能
2. **查詢區** (中央): 輸入自然語言查詢的主要區域
3. **結果區** (下方): 顯示查詢結果和圖表
4. **狀態列** (底部): 顯示系統狀態和查詢統計

## 💬 自然語言查詢指南

### 基本查詢語法

#### 1. 病患基本資料查詢

**查詢病患資訊**:
```
查詢病患李小明的基本資料
找出姓張的所有病患
顯示身分證號碼A123456789的病患資訊
```

**年齡和性別篩選**:
```
查詢60歲以上的男性病患
顯示30-50歲的女性病患清單
找出今年滿65歲的病患
```

#### 2. 就診記錄查詢

**時間範圍查詢**:
```
查詢最近一週的就診記錄
顯示2024年1月的所有就診
找出去年12月15日的就診記錄
```

**醫師相關查詢**:
```
查看張醫師今天的診療記錄
顯示王醫師這個月的病患數量
找出李醫師最常診治的疾病
```

#### 3. 診斷相關查詢

**特定疾病查詢**:
```
查詢所有糖尿病患者
找出高血壓病患的最新就診記錄
顯示心臟病相關的診斷記錄
```

**診斷統計**:
```
統計這個月各種疾病的診斷次數
顯示最常見的10種診斷
分析去年疾病診斷趨勢
```

#### 4. 處方和用藥查詢

**藥物查詢**:
```
查詢開立給李小明的所有處方
找出含有胰島素的處方記錄
顯示最近一個月的抗生素使用情況
```

**用藥統計**:
```
統計這個月最常開立的藥物
分析高血壓用藥的使用趨勢
查看各科別的處方特點
```

#### 5. 檢驗結果查詢

**檢驗項目查詢**:
```
查詢王小華的血糖檢查結果
顯示所有膽固醇異常的病患
找出最近的X光檢查報告
```

**健康指標追蹤**:
```
追蹤李小明最近半年的血壓變化
分析糖尿病患者的血糖控制情況
比較治療前後的檢驗數值變化
```

### 進階查詢技巧

#### 1. 複合條件查詢

```
查詢60歲以上且患有糖尿病的男性病患
找出最近三個月血糖超過150的病患
顯示張醫師診治的高血壓病患用藥情況
```

#### 2. 統計分析查詢

```
統計各年齡層的疾病分布
分析男女病患的就診頻率差異
比較不同醫師的診療效果
計算平均住院天數
```

#### 3. 趨勢分析查詢

```
分析去年每月的就診人數變化
追蹤慢性病患者的治療進展
比較季節性疾病的發病模式
評估預防接種的效果
```

## 📊 結果解讀和分析

### 查詢結果格式

#### 1. 表格結果
- **欄位說明**: 游標停留在欄位標題上會顯示詳細說明
- **資料排序**: 點擊欄位標題可進行排序
- **資料篩選**: 使用表格上方的篩選器進一步篩選結果

#### 2. 圖表結果
系統會根據查詢內容自動生成適合的圖表：

**長條圖**: 適用於類別資料比較
- 各疾病診斷數量
- 不同年齡層分布
- 各醫師工作量

**折線圖**: 適用於時間趨勢分析
- 月份就診人數變化
- 檢驗數值追蹤
- 用藥劑量調整

**圓餅圖**: 適用於比例分析
- 男女比例
- 疾病類型分布
- 各科別占比

**散佈圖**: 適用於關聯性分析
- 年齡與疾病關係
- 體重與血壓關係
- 用藥劑量與效果

### 結果匯出

1. **Excel匯出**: 點擊「匯出Excel」按鈕
2. **PDF報告**: 點擊「生成PDF報告」按鈕
3. **圖片儲存**: 右鍵點擊圖表選擇「儲存圖片」

## 🔍 常用查詢範例

### 日常診療查詢

#### 病患管理
```
# 找出今天需要回診的病患
查詢今天預約回診的病患清單

# 查看特定病患的完整病歷
顯示張小明的所有就診記錄和處方

# 找出失聯病患
查詢超過一年未就診的慢性病患者
```

#### 診斷分析
```
# 疾病統計
統計本月各種疾病的診斷次數

# 季節性疾病分析
比較春夏秋冬各季節的常見疾病

# 慢性病管理
追蹤糖尿病患者的血糖控制情況
```

### 管理決策查詢

#### 營運分析
```
# 就診量分析
分析去年每月的就診人數變化趨勢

# 醫師工作量
統計各醫師本月的診療人數和時數

# 收入分析
計算本月各科別的診療收入
```

#### 品質管控
```
# 用藥安全
查詢同時服用多種藥物的病患

# 檢驗追蹤
找出檢驗異常但未回診的病患

# 治療效果
比較不同治療方案的療效差異
```

### 研究統計查詢

#### 流行病學分析
```
# 疾病盛行率
計算本診所各種慢性病的盛行率

# 年齡分布
分析不同疾病的年齡分布特徵

# 性別差異
比較男女在疾病發生率上的差異
```

#### 預防醫學
```
# 篩檢效果
評估健康檢查的疾病發現率

# 疫苗接種
統計各年齡層的疫苗接種完成率

# 健康促進
追蹤健康教育活動的參與度
```

## ⚙️ 系統設定和個人化

### 個人設定

1. 點擊右上角的使用者名稱
2. 選擇「個人設定」
3. 可調整以下項目：
   - 預設查詢限制數量
   - 圖表顯示偏好
   - 結果匯出格式
   - 通知設定

### 查詢歷史

系統會自動儲存您的查詢歷史：

1. 點擊左側選單的「查詢歷史」
2. 可以：
   - 重新執行歷史查詢
   - 收藏常用查詢
   - 刪除不需要的記錄

### 常用查詢範本

建立個人常用查詢範本：

1. 執行一個查詢後，點擊「儲存為範本」
2. 輸入範本名稱和描述
3. 下次可直接從「我的範本」中選擇使用

## 🛡️ 資料安全和隱私

### 權限控制

系統依據使用者角色設定不同權限：

**醫師角色**:
- 可查詢所有病患資料
- 可查看完整檢驗結果
- 可匯出詳細報告

**護理師角色**:
- 可查詢基本病患資料
- 可查看就診記錄
- 有限的統計功能

**行政人員角色**:
- 只可查看統計資料
- 不可查看個人識別資訊
- 可使用營運分析功能

### 資料保護措施

1. **敏感資料遮罩**: 身分證號碼等敏感資訊自動遮罩
2. **查詢日誌**: 所有查詢操作都會記錄日誌
3. **會話逾時**: 閒置30分鐘後自動登出
4. **本地處理**: 所有資料在本地處理，不會上傳雲端

## ❓ 常見問題和解答

### 查詢相關問題

**Q: 為什麼我的查詢沒有結果？**
A: 請檢查：
- 查詢條件是否過於嚴格
- 資料是否已正確匯入
- 時間範圍是否合理
- 嘗試使用更通用的關鍵字

**Q: 如何查詢特殊字符的病患姓名？**
A: 可以使用部分姓名查詢，例如：
- 「查詢姓李的病患」
- 「找出名字包含明的病患」

**Q: 查詢速度很慢怎麼辦？**
A: 建議：
- 縮小查詢範圍
- 使用更具體的條件
- 避免使用模糊查詢
- 聯絡管理員檢查系統狀態

### 系統使用問題

**Q: 忘記密碼怎麼辦？**
A: 請聯絡系統管理員重設密碼。

**Q: 為什麼某些功能無法使用？**
A: 可能原因：
- 權限不足
- 功能維護中
- 瀏覽器不相容

**Q: 如何報告系統問題？**
A: 請記錄：
- 發生問題的時間
- 執行的操作
- 錯誤訊息截圖
- 聯絡技術支援

### 資料相關問題

**Q: 資料更新頻率如何？**
A: 系統通常每日更新一次，具體頻率請詢問管理員。

**Q: 歷史資料可以查詢多久？**
A: 系統保存所有歷史資料，具體可查詢範圍依資料匯入時間而定。

**Q: 發現資料錯誤怎麼辦？**
A: 請聯絡管理員，提供具體錯誤資訊以便修正。

## 📚 進階功能教學

### 自訂查詢範本

1. **建立範本**:
   ```
   範本名稱：月度糖尿病患者追蹤
   查詢語句：查詢糖尿病患者本月的血糖檢查結果
   參數設定：可自訂月份
   ```

2. **使用參數化範本**:
   ```
   查詢{醫師}醫師在{日期}的診療記錄
   統計{疾病}患者的{時間範圍}趨勢
   ```

### 批次查詢操作

1. **準備查詢清單**: 建立包含多個查詢的文字檔
2. **批次執行**: 使用「批次查詢」功能
3. **結果彙整**: 系統自動整理所有查詢結果

### API整合使用

對於程式開發人員，系統提供API介面：

```python
# Python範例
import requests

api_url = "http://your-server:8501/api/query"
headers = {"Authorization": "Bearer your-token"}
data = {"query": "查詢糖尿病患者數量"}

response = requests.post(api_url, json=data, headers=headers)
result = response.json()
```

## 📞 技術支援

### 聯絡方式

- **技術支援電話**: (請聯絡您的系統管理員)
- **電子郵件**: leon80148@gmail.com
- **線上文檔**: https://github.com/leon80148/chat4lab/docs
- **問題回報**: https://github.com/leon80148/chat4lab/issues

### 支援時間

- **工作日**: 09:00 - 18:00
- **緊急問題**: 24小時內回應
- **系統維護**: 通常安排在非工作時間

### 訓練資源

- **新手教學影片**: 系統首頁提供教學影片連結
- **操作手冊PDF**: 可從系統下載完整操作手冊
- **實體訓練課程**: 可預約現場教學服務

---

## 🎉 開始使用

現在您已經了解了系統的基本操作，開始探索診所AI查詢系統的強大功能吧！

記住幾個重要提示：
1. 🗣️ **用自然語言提問** - 就像和同事對話一樣
2. 🎯 **條件要具體** - 越具體的查詢，結果越準確
3. 📊 **善用圖表** - 視覺化資料更容易理解
4. 💾 **儲存常用查詢** - 提高工作效率
5. 🔒 **注意資料安全** - 保護病患隱私

如有任何問題，隨時聯絡技術支援團隊！