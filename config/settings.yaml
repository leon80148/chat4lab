# è¨ºæ‰€AIæŸ¥è©¢ç³»çµ±é…ç½®æª”æ¡ˆç¯„ä¾‹
# è¤‡è£½æ­¤æª”æ¡ˆç‚º settings.yaml ä¸¦ä¿®æ”¹ç›¸æ‡‰çš„è¨­å®šå€¼

# ===================
# ç³»çµ±åŸºæœ¬è¨­å®š
# ===================
system:
  name: "è¨ºæ‰€AIæŸ¥è©¢ç³»çµ±"
  version: "1.0.0"
  author: "Leon Lu"
  license: "MIT"
  repository: "https://github.com/leon80148/chat4lab"

# ===================
# è³‡æ–™åº«è¨­å®š
# ===================
database:
  type: "sqlite"
  path: "./data/anchia_lab.db"
  encoding: "big5"
  
  # å±•æœ›ç³»çµ±DBFæª”æ¡ˆé…ç½®
  tables:
    CO01M:
      description: "ç—…æ‚£ä¸»è³‡æ–™è¡¨"
      primary_key: "kcstmr"
      file_path: "./data/dbf_files/CO01M.dbf"
    CO02M:
      description: "è™•æ–¹è¨˜éŒ„æª”"
      primary_key: ["kcstmr", "idate", "itime", "dno"]
      file_path: "./data/dbf_files/CO02M.dbf"
    CO03M:
      description: "å°±è¨ºæ‘˜è¦æª”"
      primary_key: ["kcstmr", "idate", "itime"]
      file_path: "./data/dbf_files/CO03M.dbf"
    CO18H:
      description: "æª¢é©—çµæœæ­·å²æª”"
      primary_key: ["kcstmr", "hdate", "htime", "hitem"]
      file_path: "./data/dbf_files/CO18H.dbf"
  
  # SQLiteæ•ˆèƒ½èª¿å„ª
  performance:
    journal_mode: "WAL"
    synchronous: "NORMAL"
    cache_size: 10000      # 40MBå¿«å–
    temp_store: "MEMORY"
    mmap_size: 268435456   # 256MBè¨˜æ†¶é«”æ˜ å°„
    
  # å‚™ä»½è¨­å®š
  backup:
    enabled: true
    path: "./data/backups/"
    schedule: "daily"      # daily, weekly, monthly
    keep_days: 30

# ===================
# LLMè¨­å®š
# ===================
llm:
  provider: "ollama"
  base_url: "http://localhost:11434"
  model: "gemma3:4b"
  
  # æ¨è«–åƒæ•¸
  parameters:
    temperature: 0.2       # å‰µé€ æ€§ (0.0-1.0) - Llama3å„ªåŒ–
    max_tokens: 2048       # æœ€å¤§å›æ‡‰é•·åº¦
    top_p: 0.9            # æ ¸æ¡æ¨£
    top_k: 40             # Top-Kæ¡æ¨£
    repeat_penalty: 1.1    # é‡è¤‡æ‡²ç½°
    
  # æç¤ºè©è¨­å®š
  prompts:
    system_file: "config/prompts/system_prompt.txt"
    examples_file: "config/prompts/sql_examples.txt"
    medical_terms_file: "config/prompts/medical_terms.yaml"
    
  # é€¾æ™‚è¨­å®š
  timeout:
    connection: 10        # é€£ç·šé€¾æ™‚ (ç§’)
    inference: 30         # æ¨è«–é€¾æ™‚ (ç§’)
    
  # å¿«å–è¨­å®š
  cache:
    enabled: true
    max_size: 100         # æœ€å¤§å¿«å–é …ç›®æ•¸
    ttl: 300             # å¿«å–å­˜æ´»æ™‚é–“ (ç§’)

# ===================
# å®‰å…¨è¨­å®š
# ===================
security:
  # èªè­‰è¨­å®š
  authentication:
    enabled: true
    method: "simple"      # simple, ldap, oauth
    session_timeout: 1800 # 30åˆ†é˜
    max_login_attempts: 3
    lockout_duration: 300 # 5åˆ†é˜
    
  # æŸ¥è©¢é™åˆ¶
  query_limits:
    max_results: 1000     # æœ€å¤§æŸ¥è©¢çµæœæ•¸
    max_execution_time: 30 # æœ€å¤§åŸ·è¡Œæ™‚é–“ (ç§’)
    allowed_operations: ["SELECT"] # å…è¨±çš„SQLæ“ä½œ
    
  # æ•æ„Ÿæ¬„ä½é®è”½
  sensitive_fields:
    - "mpersonid"         # èº«åˆ†è­‰å­—è™Ÿ
    - "mtelh"            # é›»è©±
    - "mfml"             # ä½å®¶é›»è©±
    - "maddr"            # åœ°å€
    
  # å¯©è¨ˆæ—¥èªŒ
  audit:
    enabled: true
    log_queries: true
    log_results: false    # ä¸è¨˜éŒ„æŸ¥è©¢çµæœ (é¿å…æ•æ„Ÿè³‡è¨Š)
    retention_days: 90

# ===================
# UIè¨­å®š
# ===================
ui:
  # ä¸»é¡Œè¨­å®š
  theme: "light"          # light, dark, auto
  language: "zh-TW"       # ä»‹é¢èªè¨€
  
  # é é¢è¨­å®š
  page:
    title: "è¨ºæ‰€AIæŸ¥è©¢ç³»çµ±"
    icon: "ğŸ¥"
    layout: "wide"        # centered, wide
    
  # å´é‚Šæ¬„è¨­å®š
  sidebar:
    title: "åŠŸèƒ½é¸å–®"
    expanded: true
    
  # åœ–è¡¨è¨­å®š
  charts:
    theme: "plotly"       # plotly, matplotlib
    color_scheme: "viridis" # é¡è‰²ä¸»é¡Œ
    
  # æŸ¥è©¢ä»‹é¢
  query:
    suggestions_count: 5   # æŸ¥è©¢å»ºè­°æ•¸é‡
    history_count: 10     # æ­·å²è¨˜éŒ„æ•¸é‡
    auto_save: true       # è‡ªå‹•å„²å­˜æŸ¥è©¢

# ===================
# æ—¥èªŒè¨­å®š
# ===================
logging:
  level: "INFO"           # DEBUG, INFO, WARNING, ERROR, CRITICAL
  file: "./logs/clinic_ai.log"
  
  # æ—¥èªŒæ ¼å¼
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  
  # æ—¥èªŒè¼ªæ›¿
  rotation:
    max_size: "10MB"
    backup_count: 5
    
  # æ—¥èªŒè¨˜éŒ„å™¨
  loggers:
    dbf_parser: "INFO"
    db_manager: "INFO"  
    llm_agent: "INFO"
    auth: "WARNING"
    
  # å¤–éƒ¨å·¥å…·æ—¥èªŒ
  external:
    streamlit: "WARNING"
    ollama: "ERROR"

# ===================
# é–‹ç™¼è¨­å®š
# ===================
development:
  debug: false
  reload: false          # æª”æ¡ˆè®Šæ›´æ™‚è‡ªå‹•é‡è¼‰
  profiling: false       # æ•ˆèƒ½åˆ†æ
  
  # æ¸¬è©¦è¨­å®š
  testing:
    database: ":memory:"  # æ¸¬è©¦ç”¨è¨˜æ†¶é«”è³‡æ–™åº«
    mock_llm: false      # æ˜¯å¦æ¨¡æ“¬LLMå›æ‡‰
    timeout: 30          # æ¸¬è©¦é€¾æ™‚æ™‚é–“
    
  # é–‹ç™¼å·¥å…·
  tools:
    enable_debugger: false
    show_sql_queries: false
    timing_info: false

# ===================
# ç›£æ§è¨­å®š  
# ===================
monitoring:
  # å¥åº·æª¢æŸ¥
  health_check:
    enabled: true
    endpoint: "/healthz"
    interval: 30         # æª¢æŸ¥é–“éš” (ç§’)
    
  # æ•ˆèƒ½ç›£æ§
  performance:
    track_queries: true
    track_response_time: true
    alert_threshold: 10   # å›æ‡‰æ™‚é–“è­¦å‘Šé–¾å€¼ (ç§’)
    
  # ç³»çµ±è³‡æºç›£æ§
  resources:
    memory_threshold: 80  # è¨˜æ†¶é«”ä½¿ç”¨ç‡è­¦å‘Š (%)
    disk_threshold: 90    # ç£ç¢Ÿä½¿ç”¨ç‡è­¦å‘Š (%)

# ===================
# æ•´åˆè¨­å®š
# ===================
integrations:
  # ç¬¬ä¸‰æ–¹æœå‹™
  external_services:
    enabled: false
    
  # APIè¨­å®š
  api:
    enabled: false
    host: "0.0.0.0"
    port: 8000
    cors_origins: ["*"]
    
  # é€šçŸ¥è¨­å®š
  notifications:
    enabled: false
    channels: []          # email, slack, webhook